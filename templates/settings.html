<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Créer un compte à rebours</title>
    <link rel="stylesheet" href="/static/css/settings.css">
</head>

<body>

<div class="container">

    <h1 class="title">Créer un compte à rebours</h1>
	
	<!-- ============================ -->
	<!-- SECTION 1 — CHOIX DU TEMPLATE -->
	<!-- ============================ -->
    <section>
        <h2>1. Choisissez un template</h2>

        <div class="template-grid" id="templateGrid">
            <!-- Chaque bouton est un template -->
            <button class="template-btn" data-template="classic">Classic</button>
            <button class="template-btn" data-template="blocks">Blocks</button>
            <button class="template-btn" data-template="flip">Flip</button>
            <button class="template-btn" data-template="bubble">Bubble</button>
            <button class="template-btn" data-template="minimal">Minimal</button>
            <button class="template-btn" data-template="banner">Banner</button>
            <button class="template-btn" data-template="progress">Progress</button>
        </div>
    </section>
	
	
	<!-- ========================================== -->
	<!-- SECTION 2 — PARAMÈTRES DYNAMIQUES (MASQUÉS) -->
	<!-- ========================================== -->
    <form method="POST" id="countdownForm">

        <input type="hidden" name="template" id="selectedTemplate" value="">

        <div id="templateOptionsContainer"></div>
	    
	    
	    <!-- ======================== -->
	    <!-- APERCU en temps réel -->
	    <!-- ======================== -->
        <section class="preview-section">
            <h2>Aperçu</h2>

            {% if img_link %}
                <p class="success">
                    Votre GIF est prêt : <a href="{{ img_link }}" target="_blank">{{ img_link }}</a>
                </p>
            {% endif %}

            <div class="preview-box">
                {% if countdown_id %}
                    <img id="gifPreview"
		                    src="/c/{{countdown_id}}.gif?{{ random() }}"
		                    alt="Preview">
                {% else %}
                    <p>Aucun aperçu encore — choisissez un template.</p>
                {% endif %}
            </div>
        </section>
	    
	    <!-- SUBMIT -->
        <button type="submit" class="submit-btn">Créer le GIF</button>
    </form>

</div>


<script src="/static/js/settings.js"></script>
<script>
    // Live preview update when form changes
    const form = document.getElementById("countdownForm");
    const preview = document.getElementById("gifPreview");
    
    if (preview) {
	    form.addEventListener("input", () => {
		    preview.src = preview.src.split("?")[0] + "?" + Date.now();
	    });
    }
</script>

</body>
</html>