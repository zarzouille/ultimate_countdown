<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Liste des countdowns</title>
  <style>
    body {
	    font-family: Arial, sans-serif;
	    background: #f5f5f5;
	    margin: 0;
	    padding: 20px;
	    }
    h1 {
	    margin-bottom: 10px;
	    }
    a.button {
	    display: inline-block;
	    padding: 8px 12px;
	    background: #007bff;
	    color: white;
	    border-radius: 6px;
	    text-decoration: none;
	    font-size: 14px;
	    margin-right: 5px;
	    }
    a.button:hover {
	    background: #0056b3;
	    }
    table {
	    width: 100%;
	    border-collapse: collapse;
	    margin-top: 15px;
	    background: #fff;
	    border-radius: 10px;
	    overflow: hidden;
	    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
	    }
    th, td {
	    padding: 10px;
	    border-bottom: 1px solid #eee;
	    font-size: 14px;
	    }
    th {
	    background: #f0f0f0;
	    text-align: left;
	    }
    tr:last-child td {
	    border-bottom: none;
	    }
    .small {
	    font-size: 12px;
	    color: #666;
	    }
    .danger {
	    background: #dc3545;
	    }
    .danger:hover {
	    background: #b52a36;
	    }
    .import-box {
	    margin-top: 30px;
	    background: #fff;
	    padding: 20px;
	    border-radius: 10px;
	    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
	    }
    textarea {
	    width: 100%;
	    height: 120px;
	    font-size: 13px;
	    font-family: monospace;
	    box-sizing: border-box;
	    }
    input[type="text"] {
	    width: 200px;
	    padding: 6px;
	    box-sizing: border-box;
	    }
    button {
	    padding: 8px 12px;
	    border: none;
	    border-radius: 6px;
	    background: #007bff;
	    color: #fff;
	    cursor: pointer;
	    font-size: 14px;
	    margin-top: 10px;
	    }
    button:hover {
	    background: #0056b3;
	    }
  </style>
</head>
<body>

  <h1>üìã Countdown existants</h1>
  <p class="small">
    Connect√© en mode admin. <a href="/logout">Se d√©connecter</a> ‚Ä¢ <a href="/">Cr√©er un nouveau countdown</a>
  </p>

  {% if countdowns %}
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Derni√®re modification</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for cd in countdowns %}
          <tr>
            <td><code>{{ cd.id }}</code></td>
            <td>
              {% if cd.mtime %}
                {{ cd.mtime.strftime("%Y-%m-%d %H:%M:%S") }}
              {% else %}
                -
              {% endif %}
            </td>
            <td>
              <a class="button" href="{{ cd.preview_url }}" target="_blank">üëÅÔ∏è Preview</a>
              <a class="button" href="{{ cd.gif_url }}" target="_blank">GIF direct</a>
              <a class="button" href="{{ cd.export_url }}">Export JSON</a>

              <form action="/delete/{{ cd.id }}" method="POST" style="display:inline;" onsubmit="return confirm('Supprimer ce countdown ?');">
                <button type="submit" class="danger">üóëÔ∏è Supprimer</button>
              </form>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>Aucun countdown pour l‚Äôinstant.</p>
  {% endif %}

  <div class="import-box">
    <h2>üì• Importer un countdown</h2>
    <p class="small">Colle ici un JSON export√© pr√©c√©demment (ou venant d‚Äôailleurs). Optionnel : forcer un ID.</p>

    <form method="POST" action="/import">
      <label>JSON :</label><br>
      <textarea name="import_json" required></textarea><br><br>

      <label>ID personnalis√© (facultatif) :</label><br>
      <input type="text" name="import_id" placeholder="ex: promo_noel_2025"><br>

      <button type="submit">Importer</button>
    </form>
  </div>

</body>
</html>
